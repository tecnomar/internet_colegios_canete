<!DOCTYPE html>
<html>
<head>
    <title>Mapa con m√∫ltiples marcadores y nombres</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        #map {
            height: 100%;
            width: 100%;
        }
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
    </style>
</head>
<body>
    <div id="map"></div>
    <script>
        function initMap() {
            var map = new google.maps.Map(document.getElementById('map'), {
                zoom: 8,
                center: {lat: -12.485833, lng: -76.735000}
            });

            var locations = [
                {lat: -12.485833, lng: -76.735000, name: '20925 - 15 DE ENERO', color: 'blue'},
                {lat: -12.541944, lng: -76.721389, name: '20960 - LAS SALINAS', color: 'blue'},
                {lat: -12.462778, lng: -76.748333, name: '20959 - REPUBLICA DE SUECIA SOLO DIO CONFORMIDAD DE OCTUBRE', color: 'black'},
                {lat: -12.643056, lng: -76.650556, name: 'SAN ANTONIO DE PADUA', color: 'blue'},
                {lat: -12.636389, lng: -76.653333, name: '20179 - ALEJANDRO BALDOMERO CAMACHO CUYA', color: 'blue'},
                {lat: -12.526111, lng: -76.543333, name: '20130 - JESUS REY', color: 'blue'},
                {lat: -12.652222, lng: -76.626111, name: '20927 - DIGNIDAD NACIONAL - MALA', color: 'blue'},
                {lat: -12.669722, lng: -76.624444, name: '20237', color: 'red'},
                {lat: -12.658333, lng: -76.627500, name: '20796 - MALA', color: 'blue'},
                {lat: -12.658611, lng: -76.628889, name: '21015 - MALA', color: 'blue'},
                {lat: -12.668889, lng: -76.642778, name: '20158 - DOS DE MAYO LA HUACA', color: 'blue'},
                {lat: -12.717222, lng: -76.630000, name: '20236 - JOSE OLAYA BALANDRA', color: 'blue'},
                {lat: -12.765833, lng: -76.531667, name: '20203', color: 'red'},
                {lat: -12.779167, lng: -76.555833, name: '20123', color: 'red'},
                {lat: -12.761389, lng: -76.598056, name: '20963', color: 'red'},
                {lat: -12.735278, lng: -76.614167, name: '20973 - 9 DE OCTUBRE', color: 'blue'},
                {lat: -13.025556, lng: -76.478333, name: '20131 - JOSE OLAYA BALANDRA', color: 'blue'},
                {lat: -13.065278, lng: -76.451667, name: '21514', color: 'red'},
                {lat: -13.079256, lng: -76.442570, name: '21528', color: 'red'},
                {lat: -13.051111, lng: -76.431389, name: '20181', color: 'red'},
                {lat: -13.052515, lng: -76.4298553, name: '20182 - ABRAHAM VALDELOMAR', color: 'red'},
                {lat: -13.055556, lng: -76.431667, name: 'SAN LUIS GONZAGA COPRODELI', color: 'red'},
                {lat: -13.045278, lng: -76.427500, name: '21511 - TUPAC AMARU', color: 'red'},
                {lat: -13.029722, lng: -76.192222, name: '20231 - ANEXO DE SOCSI', color: 'red'},
                {lat: -12.960556, lng: -76.140278, name: '20150 - MARISCAL BENAVIDES', color: 'red'},
                {lat: -13.060278, lng: -76.348333, name: 'CEBE 04', color: 'red'},
                {lat: -13.064444, lng: -76.352500, name: 'IMPERIAL CNI', color: 'red'},
                {lat: -13.059722, lng: -76.356389, name: '20798 - EX GUARDIA CIVIL', color: 'red'},
                {lat: -13.056111, lng: -76.354722, name: '21001 - ZOILO CANDELA SANCHEZ', color: 'red'},
                {lat: -13.058333, lng: -76.351389, name: '20145 - INICIAL 632', color: 'red'},
                {lat: -13.062500, lng: -76.352500, name: '20146', color: 'red'},
                {lat: -13.056667, lng: -76.346944, name: '20935', color: 'red'},
                {lat: -13.038333, lng: -76.353611, name: '20970 - LEONARDO YUTA CACERES', color: 'red'},
                {lat: -13.045000, lng: -76.362778, name: '20974', color: 'red'},
                {lat: -13.055556, lng: -76.323333, name: '20876', color: 'red'},
                {lat: -13.072778, lng: -76.333889, name: 'NUESTRA SENORA DEL VALLE', color: 'red'},
                {lat: -13.075833, lng: -76.386111, name: '20874', color: 'red'},
                {lat: -13.098611, lng: -76.384444, name: '21518 - UNANUE', color: 'red'},
                {lat: -13.080278, lng: -76.386667, name: '20188 - INICIAL 627', color: 'red'},
                {lat: -13.076389, lng: -76.429167, name: '20878 - PLAYA HERMOSA', color: 'red'},
                {lat: -13.076111, lng: -76.389167, name: 'JOSE BUENAVENTURA SEPULVEDA FERNANDEZ', color: 'red'},
                {lat: -13.113889, lng: -76.412500, name: '20186 - CP COCHAHUASI', color: 'red'},
                {lat: -13.075278, lng: -76.353889, name: '21515 - HUALCARA', color: 'red'},
                {lat: -13.074444, lng: -76.386111, name: '20189', color: 'red'},
                {lat: -13.081944, lng: -76.387222, name: '20190 - REPUBLICA DE CHILE', color: 'red'},
                {lat: -13.073333, lng: -76.380833, name: '20193', color: 'red'},
                {lat: -13.131389, lng: -76.364722, name: '21628 - CLARITA', color: 'red'},
                {lat: -13.074722, lng: -76.386944, name: '20957', color: 'red'},
                {lat: -13.147778, lng: -76.373611, name: '20966', color: 'red'},
                {lat: -13.137222, lng: -76.345000, name: '21531 - MARIA AUXILIADORA', color: 'red'},
                {lat: -12.322138, lng: -76.511698, name: '20829 - DANIEL ALCIDES CARRION', color: 'red'}
            ];

            locations.forEach(function(location) {
                var marker = new google.maps.Marker({
                    position: location,
                    map: map,
                    icon: location.color === 'blue' ? 'http://maps.google.com/mapfiles/ms/icons/blue-dot.png' : 'http://maps.google.com/mapfiles/ms/icons/red-dot.png'
                });

                var contentString = `
                    <div>
                        ${location.name}
                        <br>
                        <button id="btn-${location.lat}-${location.lng}">Iniciar recorrido en Google Maps</button>
                    </div>
                `;

                var infowindow = new google.maps.InfoWindow({
                    content: contentString
                });

                marker.addListener('click', function() {
                    infowindow.open(map, marker);
                });

                google.maps.event.addListener(infowindow, 'domready', function() {
                    var button = document.getElementById(`btn-${location.lat}-${location.lng}`);
                    if (button) {
                        button.addEventListener('click', function() {
                            var url = `https://www.google.com/maps/dir/?api=1&destination=${location.lat},${location.lng}`;
                            window.open(url, '_blank');
                        });
                    }
                });
            });
        }
    </script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyA6iXoTF-XqnwAVs2FwPjVatR_kqG60Pyk&callback=initMap"></script>
</body>
</html>
